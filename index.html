<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ö—Ä–∞—Å–∏–≤—ã–µ –Ω–æ–º–µ—Ä–∞</title>

<style>
body{margin:0;background:#0f172a;color:#e5e7eb;font-family:Arial}
.container{max-width:600px;margin:auto;padding:14px}
h1{text-align:center;font-size:20px}
.tabs{display:flex;gap:8px;margin:10px 0}
.tabs button{flex:1;padding:12px;border-radius:10px;border:none;background:#1e293b;color:#fff;font-weight:bold}
.tabs button.active{background:#38bdf8;color:#020617}
.filters{display:flex;gap:8px;flex-wrap:wrap}
.filters input{flex:1;padding:10px;border-radius:8px;border:none}
.filters label{font-size:14px}
.count{text-align:center;margin:8px 0;opacity:.7}
.card{background:#020617;border-radius:14px;padding:14px;margin-top:12px;border:2px solid #334155}
.card.gold{border-color:#facc15}
.numbers{font-size:18px;line-height:1.4}
.price{font-size:20px;color:#4ade80;font-weight:bold;margin-top:6px}
.actions{display:flex;gap:6px;margin-top:10px}
.actions a,.actions button{flex:1;padding:10px;border-radius:8px;border:none;font-weight:bold;text-align:center;text-decoration:none;background:#38bdf8;color:#020617}
.fav{background:#1e293b;color:#fff}
.sold{opacity:.4}
.empty{text-align:center;margin-top:20px;opacity:.6}
</style>
</head>

<body>
<div class="container">
<h1>–ö—Ä–∞—Å–∏–≤—ã–µ —Ç–µ–ª–µ—Ñ–æ–Ω–Ω—ã–µ –Ω–æ–º–µ—Ä–∞</h1>

<div class="tabs">
  <button id="tabSingle" class="active" onclick="setMode('single')">–û–±—ã—á–Ω—ã–µ</button>
  <button id="tabPair" onclick="setMode('pair')">–ü–∞—Ä–Ω—ã–µ</button>
</div>

<div class="filters">
  <input id="search" placeholder="–ü–æ–∏—Å–∫ –ø–æ —Ü–∏—Ñ—Ä–∞–º">
  <label><input type="checkbox" id="onlyGold"> –∑–æ–ª–æ—Ç–æ</label>
  <label><input type="checkbox" id="onlyFav"> ‚ù§Ô∏è</label>
</div>

<div class="count" id="count"></div>
<div id="list"></div>
</div>

<script>
const PHONE="79251616628";
const TG="jabrail_d";

let mode="single";
const fav=JSON.parse(localStorage.getItem("FAV")||"[]");
const data=JSON.parse(localStorage.getItem("SHOP_DATA")||"[]");

function setMode(m){
  mode=m;
  tabSingle.classList.toggle("active",m==="single");
  tabPair.classList.toggle("active",m==="pair");
  render();
}

function toggleFav(id){
  const i=fav.indexOf(id);
  i>-1?fav.splice(i,1):fav.push(id);
  localStorage.setItem("FAV",JSON.stringify(fav));
  render();
}

function render(){
  const s=search.value;
  const g=onlyGold.checked;
  const f=onlyFav.checked;
  let html="",c=0;

  data.forEach((it,i)=>{
    if(it.status==="sold") return;
    if(mode==="pair" && it.numbers.length<2) return;
    if(mode==="single" && it.numbers.length>1) return;
    if(g && it.category!=="gold") return;
    if(s && !it.numbers.join("").includes(s)) return;
    if(f && !fav.includes(i)) return;

    c++;
    html+=`
    <div class="card ${it.category==="gold"?"gold":""}">
      <div class="numbers">${it.numbers.join("<br>")}</div>
      <div class="price">${it.price.toLocaleString()} ‚ÇΩ</div>
      <div class="actions">
        <button class="fav" onclick="toggleFav(${i})">${fav.includes(i)?"‚òÖ":"‚òÜ"}</button>
        <a href="https://wa.me/${PHONE}?text=–ò–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç –Ω–æ–º–µ—Ä ${it.numbers.join(", ")}" target="_blank">WA</a>
        <a href="https://t.me/${TG}" target="_blank">TG</a>
        <a href="tel:+${PHONE}">üìû</a>
      </div>
    </div>`;
  });

  count.innerText=`–ù–∞–π–¥–µ–Ω–æ: ${c}`;
  list.innerHTML=html||"<div class='empty'>–ù–µ—Ç –Ω–æ–º–µ—Ä–æ–≤</div>";
}

search.oninput=render;
onlyGold.onchange=render;
onlyFav.onchange=render;
render();
</script>
</body>
</html>
