<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ü–æ–∏—Å–∫ –∫—Ä–∞—Å–∏–≤—ã—Ö –Ω–æ–º–µ—Ä–æ–≤</title>

<style>
body {
    background:#0f172a;
    color:#e5e7eb;
    font-family:Arial,sans-serif;
    padding:20px;
}
.container { max-width:900px; margin:auto; }
textarea {
    width:100%;
    height:140px;
    padding:12px;
    font-size:16px;
    border-radius:10px;
}
button {
    width:100%;
    padding:14px;
    margin-top:10px;
    border-radius:10px;
    border:none;
    background:#38bdf8;
    font-weight:bold;
    cursor:pointer;
}
.item {
    background:#020617;
    padding:12px;
    margin-top:8px;
    border-radius:10px;
    display:flex;
    justify-content:space-between;
}
.beautiful { border:2px solid #facc15; }
.pair { color:#38bdf8; font-size:12px; }
.highlight span { color:#facc15; font-weight:bold; }
</style>
</head>

<body>
<div class="container">
<h1>–ü–æ–∏—Å–∫ –∫—Ä–∞—Å–∏–≤—ã—Ö —Ç–µ–ª–µ—Ñ–æ–Ω–Ω—ã—Ö –Ω–æ–º–µ—Ä–æ–≤</h1>

<textarea id="input" placeholder="
8928-735-79-89
8928-735-56-88
8828-735-05-25
8928-735-70-90
8928-735-60-90
"></textarea>

<button onclick="analyze()">–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å</button>

<div id="output"></div>
</div>

<script>
function analyze() {
    const text = document.getElementById("input").value;

    // 1Ô∏è‚É£ –£–±–∏—Ä–∞–µ–º –≤—Å—ë –∫—Ä–æ–º–µ —Ü–∏—Ñ—Ä
    const digits = text.replace(/\D/g, "");

    // 2Ô∏è‚É£ –†–µ–∂–µ–º –ø–æ 11 —Ü–∏—Ñ—Ä
    let phones = [];
    for (let i = 0; i + 10 < digits.length; i += 11) {
        phones.push(digits.substr(i, 11));
    }

    if (phones.length === 0) {
        document.getElementById("output").innerHTML = "–ù–æ–º–µ—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã";
        return;
    }

    // 3Ô∏è‚É£ –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è
    phones = phones.map(p => {
        if (p.startsWith("8")) p = "7" + p.slice(1);
        if (p.length === 10) p = "7" + p;
        return "+7" + p.slice(1);
    });

    // 4Ô∏è‚É£ –ü–æ–∏—Å–∫ –ø–∞—Ä–Ω—ã—Ö
    const baseMap = {};
    phones.forEach(p => {
        const base = p.slice(0,-2);
        baseMap[base] = (baseMap[base] || 0) + 1;
    });

    let html = "";

    phones.forEach(p => {
        const last4 = p.slice(-4);
        const a = last4.slice(0,2);
        const b = last4.slice(2,4);

        let beautiful = false;

        // –ø—Ä–æ—Å—Ç—ã–µ –∫—Ä–∞—Å–∏–≤—ã–µ
        if (a[1] === b[1]) beautiful = true;          // 79-89
        if (b[0] === b[1]) beautiful = true;          // 56-88
        if (a === b.split("").reverse().join("")) beautiful = true; // 05-25

        const isPair = baseMap[p.slice(0,-2)] > 1;

        html += `
        <div class="item ${beautiful ? "beautiful" : ""}">
            <div class="highlight">${highlight(p)}</div>
            <div>
                ${beautiful ? "‚ú® –∫—Ä–∞—Å–∏–≤—ã–π" : "–æ–±—ã—á–Ω—ã–π"}
                ${isPair ? "<div class='pair'>üîÅ –ø–∞—Ä–Ω—ã–π</div>" : ""}
            </div>
        </div>`;
    });

    document.getElementById("output").innerHTML = html;
}

function highlight(num) {
    const n = num.slice(2);
    const freq = {};
    n.split("").forEach(d => freq[d] = (freq[d]||0)+1);
    return "+7" + n.split("").map(d => freq[d]>1 ? `<span>${d}</span>` : d).join("");
}
</script>

</body>
</html>
